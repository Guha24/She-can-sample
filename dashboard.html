<!DOCTYPE html>
<html>
  <head>
    <title>She Can Foundation</title>
    <link href="dashboard.css" rel="stylesheet" >
  </head>
  <body>
    <div class="header">
      <img src="logo.jpg" class="logo" >
      <h1>She Can Foundation</h1>
      <button class="logout" >LogOut</button>
    </div>
    
    <div class="main">
      
    </div>

    <div class="LeaderBoard-box">
      <button class="leaderBoard">LeaderBoard</button>
    </div>

    <script type=module >
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics.js";
      import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDKoM_gCUpMILG-C-Bu9RlbIFyEZbc77Sw",
        authDomain: "she-can-backend.firebaseapp.com",
        databaseURL: "https://she-can-backend-default-rtdb.firebaseio.com",
        projectId: "she-can-backend",
        storageBucket: "she-can-backend.firebasestorage.app",
        messagingSenderId: "728641966545",
        appId: "1:728641966545:web:bf6386a4ba4913b16690f0",
        measurementId: "G-LDD62TLW91"
      };

      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const db=getDatabase(app);
      const dbRef=ref(db);
      const url=new URL(window.location.href);
      const user=url.searchParams.get('user')
      get(child(dbRef, `users/${user}`)).then((snapshot)=>{
        if(snapshot.exists()){
          const userData=snapshot.val();
          let html=
          `<h3>Welcome,${user}</h3>
          <div class="Referral">
            <p class="ref-title">Referral Code</p>
            <p class="ref-code">${userData.referralCode}</p>
          </div>
          <div class="Donations">
            <p class="don-title">Total Donations Raised</p>
            <p class="dont-amount">â‚¹${userData.amountRaised}</p>
          </div>
          <div class="Rewards">

            <p class="reward-title">Rewards/Unlockables</p>
            <div class="rew-list">
                <p>ğŸ‰ Custom T-shirt unlocked at â‚¹1000</p>
                <p>ğŸ Gift hamper unlocked at â‚¹2500</p>
                <p>ğŸ† Certificate unlocked at â‚¹5000</p>
            </div>
          </div>`
          document.querySelector('.main').innerHTML=html;
        }
        
      })
      document.querySelector('.logout').addEventListener('click',()=>{
        window.location.href='index.html';
      })

      document.querySelector('.leaderBoard').addEventListener('click',()=>{
        window.location.href='leaderboard.html';
      })

      
    </script>
    
  </body>

</html>
